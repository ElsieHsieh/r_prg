setwd("D:/L_Coding/R/r_prg/midterm_02")
Year_Taipei <- format(Year_Date,format="%Y")
library(jsonlite)
url <- "http://opendata.epa.gov.tw/ws/Data/WAT00328/?%24skip=0&%24top=1000&format=json"
water_json <- fromJSON(url)
plot(water_json$DailyWaterPerPerson, water_json$PopulationServed, main = "每人每日生活用水量 vs. 供水人數 ", xlab = "DailyWaterPerPerson", ylab = "PopulationServed")
Taipei <- water_json[water_json$ExecutingUnit=="臺北市",]
Year_Date <- as.Date(Taipei$Year,format = "%Y/%m/%d")
Year_Taipei <- format(Year_Date,format="%Y")
PopulationServed_Taipei <- as.numeric(Taipei$PopulationServed)
plot(Year_Taipei, PopulationServed_Taipei, type = "l", main = "2008年到2014年臺北市生活用水量", xlab = "Year", ylab = "用水量")
View(water_json)
Six_City <- water_json[water_json$ExecutingUnit=="臺北市"|"臺中市"|"臺南市"|"新北市"|"高雄市"|"桃園市",]
Six_City <- water_json[water_json$ExecutingUnit=="臺北市"||"臺中市"||"臺南市"||"新北市"||"高雄市"||"桃園市",]
Six_City <- water_json[water_json$ExecutingUnit %in% c("臺北市","臺中市"),]
Six_City
?%in%
source('D:/L_Coding/R/r_prg/midterm_02/midterm_02.R', encoding = 'UTF-8', echo=TRUE)
Six_City
View(Six)
View(Six_City)
Six_City_2008 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")=2008,]
Six_City_2008 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")==2008,]
Six_City_2008
View(Six_City_2008)
Six_City_2014 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")==2014,]
View(Six_City_2014)
hist(Six_City_2014$ExecutingUnit,Six_City_2014$DomesticConsumptionWater, main = "Distribution of speed variable")
?hist
hist(Six_City_2014$DomesticConsumptionWater, main = "Distribution of speed variable")
hist(as.numeric(Six_City_2014$DomesticConsumptionWater), main = "Distribution of speed variable")
mrcars
mtcars
hist(as.numeric(water_json$PopulationServed), main = "Distribution of speed variable")
hist(as.numeric(water_json$DailyWaterPerPerson), main = "Distribution of speed variable")
boxplot(Taipei$DailyWaterPerPerson, main = "Distribution of speed variable")
boxplot(Taipei$DailyWaterPerPerson, main = "boxplot")
class(Taipei$DailyWaterPerPerson)
boxplot(as.numeric(Taipei$DailyWaterPerPerson), main = "boxplot")
source('D:/L_Coding/R/r_prg/midterm_02/midterm_02.R', encoding = 'UTF-8', echo=TRUE)
par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
boxplot(as.numeric(Taipei$DailyWaterPerPerson), main = "臺北市每人每日生活用水量")
boxplot(water_json$DailyWaterPerPerson ~ water_json$ExecutingUnit, main = "Sepal length by species")
par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
boxplot(as.numeric(Taipei$DailyWaterPerPerson), main = "臺北市每人每日生活用水量")
boxplot(as.numeric(water_json$DailyWaterPerPerson) ~ water_json$ExecutingUnit, main = "Sepal length by species")
par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
boxplot(as.numeric(Taipei$DailyWaterPerPerson), main = "臺北市每人每日生活用水量")
boxplot(as.numeric(water_json$DailyWaterPerPerson) ~ water_json$ExecutingUnit, main = "Sepal length by species")
boxplot(as.numeric(water_json$DailyWaterPerPerson) ~ water_json$ExecutingUnit, main = "Sepal length by species")
source('D:/L_Coding/R/r_prg/midterm_02/midterm_02.R', encoding = 'UTF-8', echo=TRUE)
source('D:/L_Coding/R/r_prg/midterm_02/midterm_02.R', encoding = 'UTF-8', echo=TRUE)
library(jsonlite)
url <- "http://opendata.epa.gov.tw/ws/Data/WAT00328/?%24skip=0&%24top=1000&format=json"
water_json <- fromJSON(url)
plot(water_json$DailyWaterPerPerson, water_json$PopulationServed, main = "每人每日生活用水量 vs. 供水人數 ", xlab = "DailyWaterPerPerson", ylab = "PopulationServed")
Taipei <- water_json[water_json$ExecutingUnit=="臺北市",]
Year_Date <- as.Date(Taipei$Year,format = "%Y/%m/%d")
Year_Taipei <- format(Year_Date,format="%Y")
PopulationServed_Taipei <- as.numeric(Taipei$PopulationServed)
plot(Year_Taipei, PopulationServed_Taipei, type = "l", main = "2008年到2014年臺北市生活用水量", xlab = "Year", ylab = "用水量")
Six_City <- water_json[water_json$ExecutingUnit %in% c("臺北","臺中","臺南","新北","高雄","桃園"),]
Six_City_2014 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")==2014,]
#par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
hist(as.numeric(water_json$DailyWaterPerPerson), main = "Distribution of DailyWater Per Person")
#par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
boxplot(as.numeric(Taipei$DailyWaterPerPerson), main = "臺北市每人每日生活用水量")
boxplot(as.numeric(Six_City$DailyWaterPerPerson) ~ Six_City$ExecutingUnit, main = "六都每人每日用水量盒鬚圖")
?substring
Six_City <- water_json[grep("臺北","臺中","臺南","新北","高雄","桃園",water_json$ExecutingUnit,]
Six_City <- water_json[grep("桃園",water_json$ExecutingUnit,]
Six_City <- water_json[grep("桃園",water_json$ExecutingUnit),]
Six_City
Six_City <- water_json[grep("臺北","臺中","臺南","新北","高雄","桃園",water_json$ExecutingUnit),]
Six_City
Six_City <- water_json[grep(c("臺北","臺中","臺南","新北","高雄","桃園"),water_json$ExecutingUnit),]
Six_City
boxplot(as.numeric(Six_City_2014$DailyWaterPerPerson) ~ Six_City_2014$ExecutingUnit, main = "六都每人每日用水量盒鬚圖")
Six_City_2014$DailyWaterPerPerson
Six_City <- water_json[grep(c("臺北","臺中","臺南","新北","高雄","桃園"),water_json$ExecutingUnit),]
water_json[grep(c("臺北","臺中","臺南","新北","高雄","桃園"),water_json$ExecutingUnit,value=TRUE),]
water_json[grep("臺北",water_json$ExecutingUnit,value=TRUE),]
Six_City <- water_json[grep("桃園",water_json$ExecutingUnit),]
Six_City <- water_json[grep(c("桃園","臺北"),water_json$ExecutingUnit),]
Six_City <- water_json[grep("桃園","臺北",water_json$ExecutingUnit),]
Six_City
Six_City <- water_json[grep("桃園",water_json$ExecutingUnit),]
Six_City
Six_City <- water_json[grep("桃園","臺北",water_json$ExecutingUnit),]
grep('_("桃園"|"臺北")',water_json$ExecutingUnit, value = TRUE)
grep('c("桃園"|"臺北")',water_json$ExecutingUnit, value = TRUE)
x <- c("臺北","臺中","臺南","新北","高雄","桃園")
x <- "桃園"|"臺北"
x <- "桃園"|"臺北""
x <- "桃園"|"臺北""
x <- ""桃園"|"臺北""
x <- "桃園|臺北
x <- "桃園|臺北"
x <- "桃園"|"臺北"
x <- "桃園"|"臺北""
x
x
grep(x,water_json$ExecutingUnit,value=T)
Six_City <- water_json[grep("桃園",water_json$ExecutingUnit),]
Six_City
TPE <- water_json[grep("臺北",water_json$ExecutingUnit),]
Taoyuan  <- water_json[grep("桃園",water_json$ExecutingUnit),]
Taichung <- water_json[grep("臺中",water_json$ExecutingUnit),]
Tainan <- water_json[grep("臺南",water_json$ExecutingUnit),]
NewTai <- water_json[grep("新北",water_json$ExecutingUnit),]
Kaohsiung <- water_json[grep("高雄",water_json$ExecutingUnit),]
Six_City <- rbind(Six_City,c(TPE,Taoyuan,Taichung,Tainan,NewTai,Kaohsiung))
Six_City <- rbind(Six_City,TPE,Taoyuan,Taichung,Tainan,NewTai,Kaohsiung)
View(Six_City)
View(Taipei)
View(Six_City_2014)
rm(list = ls())
Taichung <- water_json[grep("臺中",water_json$ExecutingUnit),]
library(jsonlite)
library(jsonlite)
url <- "http://opendata.epa.gov.tw/ws/Data/WAT00328/?%24skip=0&%24top=1000&format=json"
water_json <- fromJSON(url)
plot(water_json$DailyWaterPerPerson, water_json$PopulationServed, main = "每人每日生活用水量 vs. 供水人數 ", xlab = "DailyWaterPerPerson", ylab = "PopulationServed")
Taipei <- water_json[water_json$ExecutingUnit=="臺北市",]
Year_Date <- as.Date(Taipei$Year,format = "%Y/%m/%d")
Year_Taipei <- format(Year_Date,format="%Y")
PopulationServed_Taipei <- as.numeric(Taipei$PopulationServed)
plot(Year_Taipei, PopulationServed_Taipei, type = "l", main = "2008年到2014年臺北市生活用水量", xlab = "Year", ylab = "用水量")
TPE <- water_json[grep("臺北",water_json$ExecutingUnit),]
Taoyuan  <- water_json[grep("桃園",water_json$ExecutingUnit),]
Taichung <- water_json[grep("臺中",water_json$ExecutingUnit),]
Tainan <- water_json[grep("臺南",water_json$ExecutingUnit),]
NewTai <- water_json[grep("新北",water_json$ExecutingUnit),]
Kaohsiung <- water_json[grep("高雄",water_json$ExecutingUnit),]
Six_City <- rbind(Six_City,TPE,Taoyuan,Taichung,Tainan,NewTai,Kaohsiung)
Six_City_2014 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")==2014,]
#par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
hist(as.numeric(water_json$DailyWaterPerPerson), main = "Distribution of DailyWater Per Person")
#par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
boxplot(as.numeric(Taipei$DailyWaterPerPerson), main = "臺北市每人每日生活用水量")
boxplot(as.numeric(Six_City_2014$DailyWaterPerPerson) ~ Six_City_2014$ExecutingUnit, main = "六都每人每日用水量盒鬚圖")
Six_City_2014 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")==2014,]
Six_City
Six_City <- rbind(Six_City,TPE,Taoyuan,Taichung,Tainan,NewTai,Kaohsiung)
