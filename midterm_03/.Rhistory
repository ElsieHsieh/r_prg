n <- paste("waterjson_",i,sep="")
head(n)
#n_num <- as.numeric(n$DailyWaterPerPerson)
#mean(n_num)
}
for(i in c(2008:2010)){
as.character(i)
n <- paste("waterjson_",i,sep="")
print(n)
#n_num <- as.numeric(n$DailyWaterPerPerson)
#mean(n_num)
}
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
#as.character(i)
#n <- paste("waterjson_",i,sep="")
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
print(mean(DWP_num))
}
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
waterjson_2009 <- water_json[formatdate==2009,]
as.numeric(waterjson_2009$DailyWaterPerPerson)
mean(as.numeric(waterjson_2009$DailyWaterPerPerson))
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean(DWP_num)
}
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_year_mean <- mean(DWP_num)
print(DWP_year_mean)
}
year <- c(2008:2014)
DWP_year <- cbind(year,DWP_year_mean)
DWP_Year
year
DWP_year_mean
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_year_mean <- mean(DWP_num)
vector_mean <- c(DWP_year_mean)
}
year <- c(2008:2014)
DWP_year <- cbind(year,vector_mean)
vector_mean
vector_mean <- print(DWP_year_mean)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_year_mean <- mean(DWP_num)
print(DWP_year_mean)
}
vector_mean <- print(DWP_year_mean)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_year_mean <- mean(DWP_num)
my_matrix <- matrix(DWP_year_mean, nrow = 7, ncol = 1)
}
my_matrix
year <- c(2008:2014)
DWP_year <- cbind(year,mean_array)
mean_array
mean_array <- matrix(DWP_year_mean, nrow = 7, ncol = 1)
year <- c(2008:2014)
DWP_year <- cbind(year,mean_array)
DWP_year
year <- c(2008:2014)
DWP_year <- cbind(year,mean_array)
colnames(DWP_year) <- c("year","mean")
DWP_year
for(i in c(2008:2014)){{
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_year_mean <- mean(DWP_num)
}
mean_array <- matrix(DWP_year_mean, nrow = 7, ncol = 1)
}
mean_array
for(){
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_year_mean <- mean(DWP_num)
}
mean_array <- matrix(DWP_year_mean, nrow = 7, ncol = 1)
}
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
as.character(i)
paste("DWP_year_mean",i,sep="") <- mean(DWP_num)
mean_array <- matrix(paste("DWP_year_mean",i,sep=""), nrow = 7, ncol = 1)
}
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
as.character(i)
a <- paste("DWP_year_mean",i,sep="") <- mean(DWP_num)
mean_array <- matrix(a, nrow = 7, ncol = 1)
}
paste("DWP_year_mean",i,sep="") <- mean(DWP_num)
paste("DWP_year_mean",i,sep="")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- matrix(mean(DWP_num), nrow = 7, ncol = 1)
}
mean_array
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
print(DWP_num)
mean_array <- matrix(mean(DWP_num), nrow = 7, ncol = 1)
}
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
print(mean(DWP_num))
mean_array <- matrix(mean(DWP_num), nrow = 7, ncol = 1)
}
mean_array
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix(nrow = 7, ncol = 1)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
rbind(mean_array,mean(DWP_num))
}
mean_array
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix(nrow = 7, ncol = 1)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean_array,mean(DWP_num))
}
mean_array
rm(mean_array)
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix(nrow = 7, ncol = 1)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean_array,mean(DWP_num))
}
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
year <- c(2008:2014)
mean_array <- matrix(year,nrow = 7, ncol = 1)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- cbind(mean_array,mean(DWP_num))
}
mean_array
mean_array <- matrix(nrow = 7, ncol = 0)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean(DWP_num))
}
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix(nrow = 7, ncol = 0)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean_array,mean(DWP_num))
}
mean_array <- matrix(nrow = 7, ncol = 1)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean_array,mean(DWP_num))
}
mean_array
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix()
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean_array,mean(DWP_num))
}
mean_array
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix()
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_array <- rbind(mean(DWP_num))
}
mean_array
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
# mean_array <- rbind(mean_array,mean(DWP_num))
mean_array <- matrix(mean(DWP_num))
}
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
mean_array <- matrix(DWP_mean)
}
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix()
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
mean_array <- rbind(mean_array,DWP_mean)
}
mean_array
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix()
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
mean_array <- rbind(mean_array,DWP_mean)
}
year <- c(2008:2014)
DWP_year <- cbind(year,mean_array)
colnames(DWP_year) <- c("year","mean")
#2008~2014年平均每人每日用水量變化
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
mean_array <- matrix()
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
mean_array <- rbind(mean_array,DWP_mean)
}
year <- c(2008:2015)
DWP_year <- cbind(year,mean_array)
colnames(DWP_year) <- c("year","mean")
DWP_year
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean[i] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean <- vector("numeric")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean[i] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
return(DWP_mean)
DWP_mean <- vector("numeric")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean[i] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
return(DWP_mean)
}
function(){
DWP_mean <- vector("numeric")
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean[i] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
return(DWP_mean)
}
function(){
DWP_mean <- vector("numeric",length=2008:2014)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean[i] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
return(DWP_mean)
}
DWP_mean
function(){
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
for(j in c(1:7)){
DWP_mean[j] <- mean(DWP_num)}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
return(DWP_mean)
}
DWP_mean
function(){
DWP_mean <- vector("numeric",length=7)
for(j in c(1:7)){
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
}
DWP_mean[j] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
return(DWP_mean)
}
DWP_mean
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean[2] <- mean(DWP_num)
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
DWP_mean <- c(mean(DWP_num))
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
for(j in c(1:7)){
DWP_mean[j] <- mean_result
}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
for(j in c(1:7)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
DWP_mean[j] <- mean_result
}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
for(j in c(1:7)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
DWP_mean[j] <- mean_result
}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
library(jsonlite)
url <- "http://opendata.epa.gov.tw/ws/Data/WAT00328/?%24skip=0&%24top=1000&format=json"
water_json <- fromJSON(url)
#2008~2014年平均每人每日用水量變化
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
for(j in c(1:7)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
DWP_mean[j] <- mean_result
}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
for(j in c(1:7)){
DWP_mean[j] <- mean_result
}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
print(mean_result)
for(j in c(1:7)){
DWP_mean[j] <- mean_result
}
# mean_array <- rbind(mean_array,mean(DWP_num))
# mean_array <- rbind(mean_array,DWP_mean)
}
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
print(mean_result)
DWP_mean[i-2007] <- mean_result
# mean_array <- rbind(mean_array,mean(DWP_num))
}
DWP_mean
year <- c(2008:2014)
DWP_year <- cbind(year,DWP_mean)
colnames(DWP_year) <- c("year","DWP_mean")
DWP_year
year <- c(2008:2014)
DWP_year_mean <- data.frame(year, DWP_mean)
DWP_year_mean
library(jsonlite)
url <- "http://opendata.epa.gov.tw/ws/Data/WAT00328/?%24skip=0&%24top=1000&format=json"
water_json <- fromJSON(url)
plot(water_json$DailyWaterPerPerson, water_json$PopulationServed, main = "每人每日生活用水量 vs. 供水人數 ", xlab = "DailyWaterPerPerson", ylab = "PopulationServed")
Taipei <- water_json[water_json$ExecutingUnit=="臺北市",]
Year_Date <- as.Date(Taipei$Year,format = "%Y/%m/%d")
Year_Taipei <- format(Year_Date,format="%Y")
PopulationServed_Taipei <- as.numeric(Taipei$PopulationServed)
plot(Year_Taipei, PopulationServed_Taipei, type = "l", main = "2008年到2014年臺北市生活用水量", xlab = "Year", ylab = "用水量")
TPE <- water_json[grep("臺北",water_json$ExecutingUnit),]
Taoyuan  <- water_json[grep("桃園",water_json$ExecutingUnit),]
Taichung <- water_json[grep("臺中",water_json$ExecutingUnit),]
Tainan <- water_json[grep("臺南",water_json$ExecutingUnit),]
NewTai <- water_json[grep("新北",water_json$ExecutingUnit),]
Kaohsiung <- water_json[grep("高雄",water_json$ExecutingUnit),]
Six_City <- rbind(TPE,Taoyuan,Taichung,Tainan,NewTai,Kaohsiung)
NewTaipeiCity <- gsub("臺北縣", "新北市", Six_City$ExecutingUnit)
New_City_Name <- gsub("縣", "市", NewTaipeiCity)
Six_City <- cbind(Six_City,New_City_Name)
Six_City_2014 <- Six_City[format(as.Date(Six_City$Year,format = "%Y/%m/%d"),format="%Y")==2014,]
#par(mfrow = c(3, 2)) # 建立一個 1x2 的網格畫布
hist(as.numeric(water_json$DailyWaterPerPerson), main = "Distribution of DailyWater Per Person")
boxplot(as.numeric(Six_City$DailyWaterPerPerson) ~ Six_City$New_City_Name, main = "2008-2014年六都每人每日用水量",ylab="公升")
#2008~2014年平均每人每日用水量變化
formatdate <- format(as.Date(water_json$Year,format = "%Y/%m/%d"),format="%Y")
DWP_mean <- vector("numeric",length=7)
for(i in c(2008:2014)){
PerYear <- water_json[formatdate==i,]
DWP_num <- as.numeric(PerYear$DailyWaterPerPerson)
mean_result <- mean(DWP_num)
print(mean_result)
DWP_mean[i-2007] <- mean_result
# mean_array <- rbind(mean_array,mean(DWP_num))
}
year <- c(2008:2014)
DWP_year_mean <- data.frame(year, DWP_mean)
barplot(DWP_year_mean$DWP_mean)
DWP_year_mean
barplot(DWP_year_mean$DWP_mean,names = DWP_year_mean$year)
setwd("D:/L_Coding/R/r_prg/midterm_03")
library(jsonlite)
url <- "Fire_Loss.json"
Fire_Loss_json <- fromJSON(url)
View(Fire_Loss_json)
source('D:/L_Coding/R/r_prg/midterm_03/midterm_03.R', echo=TRUE)
source('D:/L_Coding/R/r_prg/midterm_03/midterm_03.R', echo=TRUE)
source('D:/L_Coding/R/r_prg/midterm_03/midterm_03.R', encoding = 'UTF-8', echo=TRUE)
url <- "TaipeiMRT_Outbound_201601.json"
MRT_json <- fromJSON(url)
View(MRT_json)
head(MRT_json)
MRT_json[6,]
MRT_json[MRT_json$ids==6,]
MRT_json$data[,6]
Daan <- MRT_json$data[,6]
View(Daan)
MRT_json$sheet$columns$column_id==6
list(MRT_json)
url="TaipeiMRT_Outbound_201601.csv"
MRT_CSV <- read.csv(url,header = TRUE,encoding="UTF-8")
MRT_CSV <- read.csv(url,header = TRUE,sep=",",encoding="UTF-8")
MRT_CSV <- read.csv(url,header = TRUE,encoding="UTF-8")
url <- "TaipeiMRT.json"
MRT_json <- fromJSON(url)
View(MRT_json)
ggplot(MRT_json, aes(x = 時段, y = `台北101/世貿`)) +
geom_point()
ggplot(MRT_json, aes(x = 時段, y = `士林`)) +
geom_point()
MRT_json$`台北101/世貿`
ggplot(MRT_json, aes(x = `士林`, y = 時段)) +
geom_bar()
ggplot(MRT_json, aes(x = `士林`)) +
geom_bar()
